<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Profile Page</title>
    <link rel="stylesheet" href="/styles_other_profile.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/material-icons@1.13.3/iconfont/material-icons.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/styles_post.css">
</head>
<body>
    <!-- <div>
        <iframe src="/chatroom.html" name=" chatbtn" style="border:none; position: fixed;
            right:15px;bottom: 15px;width:1000px;height: 600px;background-color: transparent;"></iframe>
    </div> -->
    <div class="container" id = "containerid">
        <div class="sidebar">
            <div class="logo">
                <img src="/logo.png" alt="Logo">
            </div>
            <ul>
                <li><a href="/homepage/<%= id %>">Home</a></li>
                <li><a href="/search/<%= targetuser.user_id %>">Search</a></li>
                <li><a href="/profile/<%= id %>">My Profile</a></li>
                <li><a href="#">Settings</a></li>
                <li><a href="/login">Sign out</a></li>
            </ul>
        </div>
        
        <div class="main-content">
            <div class="coverphoto">
                <img src="<%= targetuser.cover_pic %>" alt="cover">
            </div>
            <div class="profile">
                <div class="profile-photo">
                    <img src="<%= targetuser.profile_pic %>" alt="Profile Photo">
                </div>
                <div class="profile-info">
                    <h1><%= targetuser.username %></h1>
                    <h3>Biography:</h3>
                    <p><%= targetuser.bio %></p>
                </div>
                <div class="profile-info">
                    <h2><%= followers %> Followers</h2>
                </div>
                <div class="profile-info">
                    <h2><%= following %> Following</h2>
                </div>
                   
                
                <form action="/other_profile/<%= targetuser.user_id%>/<%= id %>" method="POST">
                    <% if (follow) { %>
                    <button type="submit" class="follow-button" value="Submit">Followed</button>
                    <% } else { %>
                    <button type="submit" class="follow-button" value="Submit">Follow</button>
                    <% }%>
                    <script>
                    follow_btn = document.querySelector(".follow-button");
                    
                    follow_btn.onclick = function() {
                        if(this.innerHTML == "followed"){
                            this.innerHTML = "<div class='loader'></div>" ;
                            setTimeout(() => {
                                this.innerHTML = "Follow";
                            },2000);
                        }
                        else { this.innerHTML = "<div class='loader'></div>" ;
                            setTimeout(() => {
                                this.innerHTML = "followed";
                            },2000);
                        }
                    }
                    </script>
                </form>

            </div>
            <div class="posts">
                <% for (let i = 0; i < posts.length; i++) { %>
                <div class="post">
                    <div class="post-header">
                        <h2>Posted on <%= posts[i].post_time %></h2>
                    </div>
                    <div class="post-footer">                  
                        <form action="/other_profile/<%= targetuser.user_id%>" method="POST">
                            <div class="heart-btn">
                                <div class="content">
                                    <span class="heart"></span>
                                    <span class="like">Like</span>
                                    <span class="numb"></span>
                                </div>
                            </div>
                            <script>
                                $(document).ready(function(){
                                    $(".content").click(function(){
                                        $(".content").toggleClass("heart-active")
                                        $(".like").toggleClass("heart-active")
                                        $(".heart").toggleClass("heart-active")
                                        $(".numb").toggleClass("heart-active")
                                    });
                                });
                            </script>
                        </form>
                    
                        <div class="cs">
                          <a href="#">Comment</a>
                          <a href="#">Share</a>
                        </div>
                    
                    </div>
                    <p><%= posts[i].post_des %></p>
                </div>
                
                <% } %>
            </div>
        </div>
    </div>
</body>
</html>